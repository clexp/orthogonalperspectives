<!DOCTYPE html>
<html lang="{{ DEFAULT_LANG }}">
  <head>
    {% block head %}

    <title>{% block title %}{{ SITENAME }}{% endblock title %}</title>
    <meta charset="utf-8" />
    {% if FEED_ALL_ATOM %}
    <link
      href="{{ FEED_DOMAIN }}/{% if FEED_ALL_ATOM_URL %}{{ FEED_ALL_ATOM_URL }}{% else %}{{ FEED_ALL_ATOM }}{% endif %}"
      type="application/atom+xml"
      rel="alternate"
      title="{{ SITENAME }} Full Atom Feed"
    />
    {% endif %} {% if FEED_ALL_RSS %}
    <link
      href="{{ FEED_DOMAIN }}/{% if FEED_ALL_RSS_URL %}{{ FEED_ALL_RSS_URL }}{% else %}{{ FEED_ALL_RSS }}{% endif %}"
      type="application/rss+xml"
      rel="alternate"
      title="{{ SITENAME }} Full RSS Feed"
    />
    {% endif %} {% if FEED_ATOM %}
    <link
      href="{{ FEED_DOMAIN }}/{%if FEED_ATOM_URL %}{{ FEED_ATOM_URL }}{% else %}{{ FEED_ATOM }}{% endif %}"
      type="application/atom+xml"
      rel="alternate"
      title="{{ SITENAME }} Atom Feed"
    />
    {% endif %} {% if FEED_RSS %}
    <link
      href="{{ FEED_DOMAIN }}/{% if FEED_RSS_URL %}{{ FEED_RSS_URL }}{% else %}{{ FEED_RSS }}{% endif %}"
      type="application/rss+xml"
      rel="alternate"
      title="{{ SITENAME }} RSS Feed"
    />
    {% endif %} {% if CATEGORY_FEED_ATOM and category %}
    <link
      href="{{ FEED_DOMAIN }}/{% if CATEGORY_FEED_ATOM_URL %}{{ CATEGORY_FEED_ATOM_URL.format(slug=category.slug) }}{% else %}{{ CATEGORY_FEED_ATOM.format(slug=category.slug) }}{% endif %}"
      type="application/atom+xml"
      rel="alternate"
      title="{{ SITENAME }} Categories Atom Feed"
    />
    {% endif %} {% if CATEGORY_FEED_RSS and category %}
    <link
      href="{{ FEED_DOMAIN }}/{% if CATEGORY_FEED_RSS_URL %}{{ CATEGORY_FEED_RSS_URL.format(slug=category.slug) }}{% else %}{{ CATEGORY_FEED_RSS.format(slug=category.slug) }}{% endif %}"
      type="application/rss+xml"
      rel="alternate"
      title="{{ SITENAME }} Categories RSS Feed"
    />
    {% endif %} {% if TAG_FEED_ATOM and tag %}
    <link
      href="{{ FEED_DOMAIN }}/{% if TAG_FEED_ATOM_URL %}{{ TAG_FEED_ATOM_URL.format(slug=tag.slug) }}{% else %}{{ TAG_FEED_ATOM.format(slug=tag.slug) }}{% endif %}"
      type="application/atom+xml"
      rel="alternate"
      title="{{ SITENAME }} Tags Atom Feed"
    />
    {% endif %} {% if TAG_FEED_RSS and tag %}
    <link
      href="{{ FEED_DOMAIN }}/{% if TAG_FEED_RSS_URL %}{{ TAG_FEED_RSS_URL.format(slug=tag.slug) }}{% else %}{{ TAG_FEED_RSS.format(slug=tag.slug) }}{% endif %}"
      type="application/rss+xml"
      rel="alternate"
      title="{{ SITENAME }} Tags RSS Feed"
    />
    {% endif %}

    <!-- Mobile viewport optimized: j.mp/bplateviewport -->
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1, maximum-scale=1"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="{{ SITEURL }}/theme/gumby.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ SITEURL }}/theme/style.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ SITEURL }}/theme/pygment.css"
    />

    <script src="{{ SITEURL }}/theme/js/libs/modernizr-2.6.2.min.js"></script>

    {% if GOOGLE_ANALYTICS_ID %}
    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga(
        "create",
        "{{ GOOGLE_ANALYTICS_ID }}",
        "{{ GOOGLE_ANALYTICS_SITENAME }}"
      );
      ga("send", "pageview");
    </script>
    {% endif %} {% if PIWIK_URL%}
    <script type="text/javascript">
      var _paq = _paq || [];
          _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
          (function() {
           var u=(("https:" == document.location.protocol) ? "https" : "http") + "://{{ PIWIK_URL }}/";
           _paq.push(['setTrackerUrl', u+'piwik.php']);
           _paq.push(['setSiteId', {{ PIWIK_ID }}]);
           var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
           g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
       })();
    </script>
    <noscript
      ><p>
        <img
          src="http://{{ PIWIK_URL }}/piwik.php?idsite={{ PIWIK_ID }}"
          style="border: 0"
          alt=""
        /></p
    ></noscript>
    {% endif %} {% endblock head %}
    <!-- Using MathJax, with the delimiters $ -->
    <!-- Conflict with pygments for the .mo and .mi -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      "HTML-CSS": {
      styles: {
      ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
      },
      tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],processEscapes: true}
      });
    </script>
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      rel="noopener"
      target="_blank"
      href="/images/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      rel="noopener"
      target="_blank"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="48x48"
      rel="noopener"
      target="_blank"
      href="/images/favicon-48x48.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      rel="noopener"
      target="_blank"
      href="/images/apple-touch-icon.png"
    />
    <script
      type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"
    ></script>
  </head>

  <body id="index" class="home">
    <div class="container">
      <div class="row">
        <header id="banner" class="body">
          <h1><a href="{{ SITEURL }}/">{{ SITENAME }} </a></h1>
          <h6><strong>{{ SITESUBTITLE }}</strong></h6>
        </header>
        <!-- /#banner -->

        <div id="navigation" class="navbar row">
          <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"
            ><i class="icon-menu"></i
          ></a>

          <ul class="columns">
            <!-- <li><a href="{{ SITEURL }}/">Home</a></li> -->

            {% for title, link in MENUITEMS %}
            <!-- recall in pelican a menu is what everyone else calls a navbar-->
            <!--  these are defined in pelicanconf.py  -->
            <li><a href="{{ link }}">{{ title }}</a></li>
            {% endfor %}

            <!-- Search Bar -->
            <li class="search-container">
              <div class="search-box">
                <input type="text" id="search-input" placeholder="Search..." />
                <button type="button" id="search-button">üîç</button>
              </div>
            </li>

            <!--
                {% if not DISPLAY_PAGES_ON_MENU %} 
                  {% for p in pages %}
                    <li{% if p == page %} class="active"{% endif %}><a href="{{ SITEURL }}/{{ p.url }}">{{ p.title }}</a></li>
                  {% endfor %}
                {% else %}
                  {% if not DISPLAY_CATEGORIES_ON_MENU %} 
                    {% for cat, null in categories %}
                      <li{% if cat == category %} class="active"{% endif %}><a href="{{ SITEURL }}/{{ cat.url }}">{{ cat }}</a></li>
                    {% endfor %}
                  {% endif %}
                {% endif %}
              -->
          </ul>
        </div>

        {% block content %} {% endblock %}
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container -->

    <div class="container.nopad bg">
      <footer id="credits" class="row">
        <div class="seven columns left-center">
          <address id="about" class="vcard body">
            Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
            which takes great advantage of
            <a href="http://python.org">Python</a>.
            <br />
            Based on the
            <a target="_blank" href="http://gumbyframework.com"
              >Gumby Framework</a
            >
          </address>
        </div>

        <div class="seven columns">
          <div class="row">
            <ul class="socbtns">
              {% if GITHUB_URL %}
              <li>
                <div class="btn primary">
                  <a href="{{ GITHUB_URL }}" target="_blank">Github</a>
                </div>
              </li>
              {% endif %} {% if TWITTER_URL %}
              <li>
                <div class="btn twitter">
                  <a href="{{ TWITTER_URL }}" target="_blank">Twitter</a>
                </div>
              </li>
              {% endif %} {% if FACEBOOK_URL %}
              <li>
                <div class="btn facebook">
                  <a href="{{ FACEBOOK_URL }}" target="_blank">Facebook</a>
                </div>
              </li>
              {% endif %} {% if GOOGLEPLUS_URL %}
              <li>
                <div class="btn danger">
                  <a href="{{ GOOGLEPLUS_URL }}" target="_blank">Google+</a>
                </div>
              </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </footer>
    </div>

    {% include 'disqus_script.html' %} {% include 'piwik.html' %}
    <script src="{{ SITEURL }}/theme/js/libs/jquery-1.9.1.min.js"></script>
    <script src="{{ SITEURL }}/theme/js/libs/gumby.min.js"></script>
    <script src="{{ SITEURL }}/theme/js/plugins.js"></script>

    <!-- Search Functionality -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const searchInput = document.getElementById("search-input");
        const searchButton = document.getElementById("search-button");

        function performSearch() {
          const query = searchInput.value.trim();
          if (query) {
            // Redirect to search results page with query parameter
            const searchUrl =
              "{{ SITEURL }}/search.html?q=" + encodeURIComponent(query);
            window.location.href = searchUrl;
          }
        }

        // Search on button click
        searchButton.addEventListener("click", performSearch);

        // Search on Enter key
        searchInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            performSearch();
          }
        });

        // Focus search input on Ctrl+K (common search shortcut)
        document.addEventListener("keydown", function (e) {
          if ((e.ctrlKey || e.metaKey) && e.key === "k") {
            e.preventDefault();
            searchInput.focus();
          }
        });
      });
    </script>
  </body>
</html>
